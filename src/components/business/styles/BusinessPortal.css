/* ---
  FarmTrace Secure Business Portal Stylesheet
  - A clean, consistent theme for Distributors & Retailers.
--- */

/* ==========================================================================
   1. GLOBAL STYLES & VARIABLES
   ========================================================================== */
:root {
  --primary-blue: #2563eb;
  --primary-blue-dark: #1d4ed8;
  --accent-green: #10b981;
  --bg-main: #f3f4f6;
  --bg-sidebar: #1f2937;
  --text-sidebar: #d1d5db;
  --border-color: #e5e7eb;
  --card-bg: #ffffff;
  --text-dark: #111827;
  --text-light: #4b5563;
  --status-completed: #10b981;
  --sidebar-width: 260px;
  --sidebar-width-collapsed: 80px;
  --header-height: 70px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Inter', sans-serif; background-color: var(--bg-main); color: var(--text-dark); }
button { font-family: inherit; cursor: pointer; }
input, select { font-family: inherit; }

/* ==========================================================================
   2. PORTAL LAYOUT (Same as Admin)
   ========================================================================== */
.business-portal {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  grid-template-rows: var(--header-height) 1fr;
  grid-template-areas: "sidebar header" "sidebar main";
  height: 100vh;
  transition: grid-template-columns 0.3s ease;
}
.business-portal.sidebar-collapsed {
  grid-template-columns: var(--sidebar-width-collapsed) 1fr;
}
.main-content { grid-area: main; overflow-y: auto; padding: 2rem; }
.page-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; }

/* ==========================================================================
   3. HEADER & SIDEBAR (Same as Admin)
   ========================================================================== */
.header { grid-area: header; display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; background-color: var(--card-bg); border-bottom: 1px solid var(--border-color); }
.header-left { display: flex; align-items: center; gap: 1rem; }
.header-logo { height: 32px; }
.header-title { font-size: 1.25rem; font-weight: 600; }
.header-right { display: flex; align-items: center; gap: 1.5rem; }
.notification-btn { position: relative; background: none; border: none; }
.notification-badge { position: absolute; top: -4px; right: -4px; background: var(--accent-green); color: white; width: 16px; height: 16px; border-radius: 50%; font-size: 0.6rem; display: flex; align-items: center; justify-content: center; }
.user-profile { display: flex; align-items: center; gap: 0.75rem; }
.user-avatar { width: 40px; height: 40px; border-radius: 50%; }
.user-info { display: flex; flex-direction: column; }
.user-name { font-weight: 600; }
.user-role { font-size: 0.8rem; color: var(--text-light); }
.sidebar { grid-area: sidebar; background-color: var(--bg-sidebar); color: var(--text-sidebar); padding: 1.5rem 1rem; transition: width 0.3s ease; overflow: hidden; }
.sidebar-content { display: flex; flex-direction: column; height: 100%; }
.sidebar-nav { flex-grow: 1; }
.sidebar-nav ul { list-style: none; }
.nav-item { display: flex; align-items: center; gap: 1rem; width: 100%; padding: 0.8rem 1rem; background: none; border: none; color: inherit; border-radius: 8px; text-align: left; transition: all 0.2s; white-space: nowrap; }
.nav-item:hover { background-color: rgba(255, 255, 255, 0.1); }
.nav-item.active { background-color: var(--primary-blue); color: white; font-weight: 600; }
.nav-text { opacity: 1; transition: opacity 0.2s ease; }
.sidebar-toggle { margin-top: auto; }
.business-portal.sidebar-collapsed .nav-text { opacity: 0; width: 0; }
.business-portal.sidebar-collapsed .nav-item { justify-content: center; }

/* ==========================================================================
   4. GENERAL & REUSABLE COMPONENTS
   ========================================================================== */
.card { background-color: var(--card-bg); border-radius: 12px; border: 1px solid var(--border-color); overflow: hidden; }
.card-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; padding: 1.5rem; border-bottom: 1px solid var(--border-color); }
.btn { padding: 0.6rem 1.2rem; border-radius: 8px; border: 1px solid transparent; font-weight: 600; }
.btn-primary { background-color: var(--primary-blue); color: white; }
.btn-primary:hover { background-color: var(--primary-blue-dark); }
.btn-secondary { border-color: var(--border-color); background: white; color: var(--text-dark); }
.btn-sm { padding: 0.4rem 0.8rem; font-size: 0.8rem; }
.filter-bar { display: flex; gap: 1rem; padding: 1.5rem; border-bottom: 1px solid var(--border-color); }
.search-wrapper { position: relative; flex-grow: 1; }
.search-wrapper input { padding: 0.6rem 1rem 0.6rem 2.5rem; width: 100%; border-radius: 8px; border: 1px solid var(--border-color); }
.search-wrapper .search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-light); }
.table-responsive { overflow-x: auto; }
.data-table { width: 100%; border-collapse: collapse; }
.data-table th, .data-table td { padding: 1rem 1.5rem; text-align: left; border-bottom: 1px solid var(--border-color); }
.data-table th { background-color: var(--bg-main); font-size: 0.8rem; text-transform: uppercase; color: var(--text-light); }
.status-badge { padding: 0.25rem 0.6rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
.status-completed { background-color: #d1fae5; color: #065f46; }

/* ==========================================================================
   5. PAGE-SPECIFIC STYLES
   ========================================================================== */
/* --- Dashboard --- */
.dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
.kpi-card { display: flex; align-items: center; gap: 1rem; padding: 1.5rem; background: var(--card-bg); border-radius: 12px; border: 1px solid var(--border-color); }
.kpi-icon { background: #e0e7ff; color: var(--primary-blue); width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.kpi-title { font-size: 0.9rem; color: var(--text-light); }
.kpi-value { font-size: 1.75rem; font-weight: 700; }
.quick-actions { grid-column: 1 / 3; }
.action-buttons { display: flex; gap: 1rem; padding: 1.5rem; }
.action-buttons .btn { flex: 1; padding: 1rem; font-size: 1.1rem; }
.activity-feed { grid-column: 1 / 4; }
.feed-list { list-style: none; max-height: 250px; overflow-y: auto; padding: 1.5rem; }
.feed-list li { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border-color); font-size: 0.9rem; }
.feed-list li:last-child { border-bottom: none; }
.icon-success { color: var(--accent-green); }
.icon-transfer { color: var(--primary-blue); }

/* --- Inventory (Modal) --- */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 1001; }
.modal-content { background: white; border-radius: 12px; padding: 2rem; max-width: 500px; width: 90%; position: relative; }
.modal-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; }
.modal-title { margin-bottom: 1.5rem; }
.trace-details { text-align: center; }
.trace-photo { width: 100%; max-height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem; }
.trace-history { list-style: none; text-align: left; margin-top: 1rem; }
.trace-history li { padding: 0.5rem 0; }

/* --- Receive Goods --- */
.receive-goods-card { padding: 3rem; text-align: center; }
.btn-scan { background: var(--bg-main); border: 2px dashed var(--border-color); color: var(--text-light); padding: 2rem; border-radius: 12px; display: flex; flex-direction: column; align-items: center; gap: 1rem; width: 100%; transition: all 0.3s; }
.btn-scan:hover { border-color: var(--primary-blue); color: var(--primary-blue); }
.or-divider { margin: 2rem 0; color: var(--text-light); }
.manual-entry { display: flex; gap: 1rem; }
.manual-entry input { flex: 1; padding: 0.8rem; border: 1px solid var(--border-color); border-radius: 8px; }
.verification-title { color: var(--accent-green); display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 1.5rem; margin-bottom: 2rem; }
.verification-text { font-size: 1.1rem; margin-top: 1rem; }
.btn-confirm { width: 100%; padding: 1rem; font-size: 1.1rem; margin-top: 2rem; }

/* --- Transfer History --- */
.date-filter { display: flex; align-items: center; gap: 0.5rem; }
.date-filter select { border: 1px solid var(--border-color); border-radius: 8px; padding: 0.6rem; }